# Chartacritty = Alacritty plus charts and other useless decorations

Last updated to v0.17.0 upstream

![Chartacritty running with prometheus metrics, moon phase decoration, light beam decoration, polar clock decoration, hexagon background decorations and christmas spirit with snow!](https://user-images.githubusercontent.com/873436/208736841-340e92cf-c14a-4ac8-b901-253d714421d6.gif)

## About

This is a modified version of Alacritty that includes:

- Drawing time series charts (prometheus based or internal counters)
- Drawing alerts, references and other decorations on the time series (see below for example).
- Hexagon background decorations (Like James Webb Telescope, Starcraft).
- Nannou decorations (these are decorations that can be generated by creating nannou primitives, text and wgpu not supported yet).
- Moon phase decorations (Gather moon-phase data and use nannou to draw it).
- "Suspended in a light beam" (from Sagan's poem The Pale Blue Dot). a beam of "light" that travels through the background decorations "now and then".

## Why

I feel I got enough CPU/GPU power to add a few vertices and bridge generative art, monitoring and alacritty.

The goal is to make environment immerssive and learn about terminals, generative art, astronomy.

And just have fun in general...

## Mirror the screenshot setup

```yaml
key_bindings:
  - { key: Comma,    mods: Alt,     action: ToggleChartShow                  } # This hides the charts TODO hide decorations
charts:
  default_dimensions:
    x: 50
    y: 25
  position:
    x: 1000
  spacing: 10
  charts:
    - name: output newlines
      series:
        - name: output
          type: alacritty_output
          color: "0x00ff00"
          alpha: 1.0
          missing_values_policy: last
          collision_policy: Increment
    - name: input newlines
      series:
        - name: input
          type: alacritty_input
          color: "0xff0000"
          alpha: 1.0
          missing_values_policy: last
          collision_policy: Increment
    - name: load
      decorations:
        - type: reference
          value: 16.0
          color: "0x03dac6"
          alpha: 0.3
          height_multiplier: 0.05
        - type: alert
          target: prometheus alerts # ties to below series of the same name
          threshold: 0
          comparator: '>'
          color: "0xff0000"
      series:
        - name: load average 1 min
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=node_load1'
          color: "0xbb86cf"
          alpha: 0.9
          missing_values_policy: avg
          collision_policy: Overwrite
          metrics_capacity: 30
        - name: load average 5 min
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=node_load5'
          color: "0xba68c8"
          alpha: 0.6
          missing_values_policy: avg
          collision_policy: Overwrite
          metrics_capacity: 30
        - name: load average 15 min
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=node_load15'
          color: "0xee98fb"
          alpha: 0.3
          missing_values_policy: avg
          collision_policy: Overwrite
          metrics_capacity: 30
        - name: prometheus alerts
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=ALERTS'
          color: "0xff0000"
          collision_policy: Overwrite
          missing_values_policy: zero  # The ALERT type queries tend to disappear, so making them zero by default
          alpha: 0.0                   # This is meant only for alerting, so it will be set to transparent
    - name: memory
      series:
        - name: memory used
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=node_memory_Active_bytes'
          color: "0xcf6679"
          alpha: 1.0
          missing_values_policy: avg
          collision_policy: Overwrite
          metrics_capacity: 30
        - name: memory total
          type: prometheus
          refresh: 15
          source: 'http://localhost:9090/api/v1/query_range?query=node_memory_MemTotal_bytes'
          color: "0xe1f5fe"
          alpha: 1.0
          missing_values_policy: avg
          collision_policy: Overwrite
          metrics_capacity: 30
decorations:
  decorators:
    - type: Triangles
      props:
        type: Hexagon
        props:
          vertex_color: "0x1958a7"
          center_color: "0x000000"
          alpha: 0.05
          radius: 100
    - type: Triangles
      props:
        type: Nannou
        props:
          color: "0x1958a7"
          alpha: 0.2
          radius: 100 # This needs to be the same as the above radius or the hexs won't match
```
